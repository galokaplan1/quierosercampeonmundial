{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useContext } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var initialState = {\n  token: false,\n  platos: [],\n  preciototal: 0,\n  healthScore: 0\n};\nexport var ActionTypes = {\n  SetToken: 'SET_TOKEN',\n  SetPlatos: 'SET_PLATOS',\n  SetEliminarId: 'SET_ELIMINAR_ID'\n};\nexport var reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ActionTypes.SetToken:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: action.value\n      });\n    case ActionTypes.SetPlatos:\n      console.log(state.preciototal);\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        platos: [].concat(_toConsumableArray(state.platos), [action.value]),\n        preciototal: state.preciototal + action.value.pricePerServing,\n        healthScore: state.healthScore + action.value.healthScore\n      });\n    case ActionTypes.SetEliminarId:\n      console.log(action.value.pricePerServing);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        platos: state.platos.filter(function (item) {\n          return item.id !== action.value.id;\n        }),\n        preciototal: state.preciototal - action.value.pricePerServing,\n        healthScore: state.healthScore - action.value.healthScore\n      });\n    default:\n      return state;\n  }\n};\nexport var initialContext = {\n  contextState: initialState,\n  setContextState: function setContextState() {}\n};\nvar Cont = React.createContext(initialContext);\nexport function ContextProvider(_ref) {\n  var children = _ref.children,\n    _ref$initial = _ref.initial,\n    initial = _ref$initial === void 0 ? initialState : _ref$initial;\n  var _React$useReducer = React.useReducer(reducer, initial),\n    _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n    state = _React$useReducer2[0],\n    dispatch = _React$useReducer2[1];\n  var contextState = state;\n  var setContextState = dispatch;\n  return _jsx(Cont.Provider, {\n    value: {\n      contextState: contextState,\n      setContextState: setContextState\n    },\n    children: children\n  });\n}\nexport var useContextState = function useContextState() {\n  return useContext(Cont);\n};","map":{"version":3,"names":["React","useContext","initialState","token","platos","preciototal","healthScore","ActionTypes","SetToken","SetPlatos","SetEliminarId","reducer","state","action","type","value","console","log","pricePerServing","filter","item","id","initialContext","contextState","setContextState","Cont","createContext","ContextProvider","children","initial","useReducer","dispatch","useContextState"],"sources":["C:/Users/user/Desktop/dai/daidic.zip/dai01/Context.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\n\r\nexport const initialState = {\r\n    token: false,   \r\n    platos:[],\r\n    preciototal: 0,\r\n    healthScore: 0,\r\n    };\r\n/*\r\n for (let i = 0; i < contextState.platos.length; i++) { \r\n      precio += contextState.platos[i].pricePerServing\r\n      sumaHealth += contextState.platos[i].healthScore\r\n  }\r\n  if(sumaHealth > 0){\r\n    healthscore = sumaHealth / contextState.platos.length \r\n  }\r\n*/\r\nexport const ActionTypes = {\r\n    SetToken: 'SET_TOKEN',                         \r\n    SetPlatos: 'SET_PLATOS',\r\n    SetEliminarId: 'SET_ELIMINAR_ID'\r\n    \r\n};\r\n\r\nexport const reducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n      case ActionTypes.SetToken:\r\n        return ({\r\n            ...state,\r\n            token: action.value,                \r\n        });\r\n    case ActionTypes.SetPlatos:\r\n        console.log(state.preciototal);\r\n        \r\n        /*\r\n         let precio = 0;\r\n        let healthscore= 0;\r\n        for (let i = 0; i < state.platos.length; i++) { \r\n            precio += state.platos[i].pricePerServing\r\n            sumaHealth += state.platos[i].healthScore\r\n        }\r\n        precio += action.value.pricePerServing\r\n        sumaHealth += action.value.healthScore\r\n        if(sumaHealth > 0){\r\n          healthscore = sumaHealth / state.platos.length;\r\n        }*/\r\n        return ({\r\n            ...state,\r\n            platos: [...state.platos, action.value],\r\n            preciototal: state.preciototal + action.value.pricePerServing ,\r\n            healthScore: state.healthScore + action.value.healthScore ,\r\n        });\r\n    case ActionTypes.SetEliminarId:\r\n        console.log(action.value.pricePerServing);\r\n        return ({\r\n            ...state,\r\n            platos: state.platos.filter((item) => item.id !== action.value.id), \r\n            preciototal: state.preciototal - action.value.pricePerServing ,\r\n            healthScore: state.healthScore - action.value.healthScore , \r\n        });\r\ndefault:\r\n    return state;\r\n    \r\n}\r\n};\r\n\r\nexport const initialContext = {\r\n    contextState: initialState,\r\n    setContextState: () => {},\r\n};\r\n\r\nconst Cont = React.createContext(initialContext);\r\n\r\n\r\nexport function ContextProvider({children, initial = initialState}) {\r\n    const [state, dispatch] = React.useReducer(reducer, initial);\r\n\r\n\r\nconst contextState = state;\r\nconst setContextState = dispatch;\r\n\r\nreturn <Cont.Provider value={{contextState, setContextState }}>{children}</Cont.Provider>   \r\n\r\n}\r\n\r\nexport const useContextState = () => useContext(Cont);"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AAAC;AAE1C,OAAO,IAAMC,YAAY,GAAG;EACxBC,KAAK,EAAE,KAAK;EACZC,MAAM,EAAC,EAAE;EACTC,WAAW,EAAE,CAAC;EACdC,WAAW,EAAE;AACb,CAAC;AAUL,OAAO,IAAMC,WAAW,GAAG;EACvBC,QAAQ,EAAE,WAAW;EACrBC,SAAS,EAAE,YAAY;EACvBC,aAAa,EAAE;AAEnB,CAAC;AAED,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAO,GAA2B;EAAA,IAAvBC,KAAK,uEAAG,CAAC,CAAC;EAAA,IAAEC,MAAM;EACtC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKP,WAAW,CAACC,QAAQ;MACvB,uCACOI,KAAK;QACRT,KAAK,EAAEU,MAAM,CAACE;MAAK;IAE3B,KAAKR,WAAW,CAACE,SAAS;MACtBO,OAAO,CAACC,GAAG,CAACL,KAAK,CAACP,WAAW,CAAC;;MAc9B,uCACOO,KAAK;QACRR,MAAM,+BAAMQ,KAAK,CAACR,MAAM,IAAES,MAAM,CAACE,KAAK,EAAC;QACvCV,WAAW,EAAEO,KAAK,CAACP,WAAW,GAAGQ,MAAM,CAACE,KAAK,CAACG,eAAe;QAC7DZ,WAAW,EAAEM,KAAK,CAACN,WAAW,GAAGO,MAAM,CAACE,KAAK,CAACT;MAAW;IAEjE,KAAKC,WAAW,CAACG,aAAa;MAC1BM,OAAO,CAACC,GAAG,CAACJ,MAAM,CAACE,KAAK,CAACG,eAAe,CAAC;MACzC,uCACON,KAAK;QACRR,MAAM,EAAEQ,KAAK,CAACR,MAAM,CAACe,MAAM,CAAC,UAACC,IAAI;UAAA,OAAKA,IAAI,CAACC,EAAE,KAAKR,MAAM,CAACE,KAAK,CAACM,EAAE;QAAA,EAAC;QAClEhB,WAAW,EAAEO,KAAK,CAACP,WAAW,GAAGQ,MAAM,CAACE,KAAK,CAACG,eAAe;QAC7DZ,WAAW,EAAEM,KAAK,CAACN,WAAW,GAAGO,MAAM,CAACE,KAAK,CAACT;MAAW;IAErE;MACI,OAAOM,KAAK;EAAC;AAGjB,CAAC;AAED,OAAO,IAAMU,cAAc,GAAG;EAC1BC,YAAY,EAAErB,YAAY;EAC1BsB,eAAe,EAAE,2BAAM,CAAC;AAC5B,CAAC;AAED,IAAMC,IAAI,GAAGzB,KAAK,CAAC0B,aAAa,CAACJ,cAAc,CAAC;AAGhD,OAAO,SAASK,eAAe,OAAqC;EAAA,IAAnCC,QAAQ,QAARA,QAAQ;IAAA,oBAAEC,OAAO;IAAPA,OAAO,6BAAG3B,YAAY;EAC7D,wBAA0BF,KAAK,CAAC8B,UAAU,CAACnB,OAAO,EAAEkB,OAAO,CAAC;IAAA;IAArDjB,KAAK;IAAEmB,QAAQ;EAG1B,IAAMR,YAAY,GAAGX,KAAK;EAC1B,IAAMY,eAAe,GAAGO,QAAQ;EAEhC,OAAO,KAAC,IAAI,CAAC,QAAQ;IAAC,KAAK,EAAE;MAACR,YAAY,EAAZA,YAAY;MAAEC,eAAe,EAAfA;IAAgB,CAAE;IAAA,UAAEI;EAAQ,EAAiB;AAEzF;AAEA,OAAO,IAAMI,eAAe,GAAG,SAAlBA,eAAe;EAAA,OAAS/B,UAAU,CAACwB,IAAI,CAAC;AAAA"},"metadata":{},"sourceType":"module"}